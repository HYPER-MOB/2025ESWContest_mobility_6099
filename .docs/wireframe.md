# MyDrive3DX – 모바일 와이어프레임

> 웹 프로토타입 검증 완료. 본 문서는 React Native 앱 개발을 위한 모바일 기준 와이어프레임입니다.

## 글로벌 구조

### 네비게이션
**Bottom Tab (5개)**: 홈 · 대여 · 등록 · 제어 · 설정
- 아이콘: Home, CalendarClock, IdCard, Car, Settings
- 활성 상태: primary 색상 + 배경 강조
- 최소 터치 영역: 64px (모바일)

### Header (상단바)
- 좌: MyDrive3DX 로고 (Car 아이콘 + 그라디언트 텍스트)
- 우: 로그아웃 버튼
- 높이: 56dp (Android), 64dp (iOS SafeArea)
- 고정 위치, 반투명 블러 효과

### 레이아웃
- Flexbox 기반, 전체 화면 높이 사용
- 상단 헤더 고정 (sticky)
- 하단 탭바 고정 (sticky)
- 메인 컨텐츠 영역 스크롤 가능
- 최대 너비: 672px (max-w-2xl, 태블릿 대응)
- 패딩: container mx-auto p-4

### 공통 컴포넌트 (구현 완료)
- **Card**: 정보 그룹핑, gradient-card 배경, shadow-lg
- **Button**: variant="hero" (primary), "outline", "ghost"
- **Input**: type="text", "password", "number" 지원
- **Badge**: 상태 표시 (색상별 variant)
- **Slider**: 시트 조정용 (min/max/step)
- **Toast**: 성공/실패 알림 (Toaster + Sonner)
- **StatusBadge**: 커스텀 렌탈/MFA/안전 상태 컴포넌트

### 디자인 시스템 (index.css 기준)
- **Primary**: hsl(189 85% 55%) - 시안 블루
- **배경**: hsl(222 47% 11%) - 다크
- **카드**: hsl(222 47% 15%) + 반투명 블러
- **그라디언트**: primary → primary-glow
- **애니메이션**: 0.3s cubic-bezier(0.4, 0, 0.2, 1)
- **Glow 효과**: box-shadow 0 0 30px primary/0.3

### 상태 뱃지
- Rental: `requested` `approved` `picked` `returned` `canceled`
- MFA: `pending` `smartkey_ok` `face_ok` `nfc_bt_ok` `passed` `failed`
- Safety: `ok` `block`

---

## 화면 플로우 (구현 완료)

```
로그인 (dev/dev) → 홈
홈 → 대여 목록 → 예약 상세
홈 → 사전 등록 (셀카 → 체형 → NFC/BT) → 완료
홈 → 제어 (MFA 체크 → 시트/미러 조정)
홈 → 설정
```

**구현된 라우트**:
- `/login` - 로그인 (Layout 제외)
- `/` - 홈
- `/rentals` - 차량 대여 목록
- `/rental/:id` - 예약 상세
- `/register` - 사전 등록 (3단계)
- `/control` - 차량 제어
- `/settings` - 설정

---

## 01. 로그인 (구현 완료)

```
┌────────────────────────────────┐
│  [Car Icon - Gradient Glow]    │
│  MyDrive3DX (Gradient Text)    │
│  내 몸에 맞춘 개인화 주행 경험  │
│                                │
│ 아이디     [dev            ]   │
│ 비밀번호   [•••]               │
│                                │
│ [로그인]                       │
│                                │
│ 데모 계정: dev / dev           │
└────────────────────────────────┘
```

**구현 사항**:
- 중앙 정렬, 전체 화면 레이아웃
- 애니메이션 배경 (pulse gradient)
- 더미 인증: id=dev, pw=dev
- localStorage 저장 후 홈 리다이렉트
- Toast 알림 (성공/실패)
- Layout 제외 (독립 페이지)

---

## 03. 홈

```
┌────────────────────────────────┐
│ 예약 현황                      │
│ ┌───────────────┐              │
│ │ SEDAN-24      │  [상세 ▶︎]   │
│ │ 10:00~12:00   │              │
│ │ 상태: approved│              │
│ └───────────────┘              │
│                                │
│ [현장 인증 시작]               │
│ [프로필 적용] (비활성: 인증전) │
│                                │
│ 빠른 액션:                     │
│ [대여하기]  [등록]             │
└────────────────────────────────┘
```

---

## 04. 대여

**목록**
```
┌────────────────────────────────┐
│ 검색 (지역/시간)  [🔍]         │
│ 필터 (좌석·미러·스티어링)      │
│ ────────────────────────────── │
│ ▸ 차량 A  seat + mirror        │
│ ▸ 차량 B  seat + mirror + steer│
│ ...                            │
└────────────────────────────────┘
```

**차량 상세 & 예약**
```
┌────────────────────────────────┐
│ SEDAN-24 (SEOUL-01)            │
│ Capability: Seat/Mirror        │
│                                │
│ 날짜: [달력 선택]              │
│ 시간: [시작] ~ [종료]          │
│                                │
│ [예약하기]                     │
└────────────────────────────────┘
```

**예약 상세**
```
┌────────────────────────────────┐
│ 예약ID …  상태: approved       │
│ ────────────────────────────── │
│ ▸ requested  10:00             │
│ ▸ approved   10:02             │
│ ▸ picked     --                │
│                                │
│ [현장 인증 시작]  [예약 취소]  │
│ (가이드: NFC 태깅 위치 안내)    │
└────────────────────────────────┘
```

---

## 05. 사용자 등록

**셀카**
```
┌────────────────────────────────┐
│ [카메라 미리보기 ◯ 얼굴 가이드] │
│                                │
│ [촬영]  [다시 찍기]            │
│ 품질: 흔들림/노출 체크         │
└────────────────────────────────┘
```

**NFC 난수**
```
┌────────────────────────────────┐
│ 일회성 토큰 생성 (TTL 120s)    │
│ NDEF: tokenId ****…            │
│                                │
│ [차량 NFC 리더에 태그하세요]    │
│ 상태: 대기 → 판독중 → 완료      │
│                                │
│ [재생성]  [가이드]             │
└────────────────────────────────┘
```

**체형 입력**
```
┌────────────────────────────────┐
│ 키 (cm)      [ 176 ]           │
│ 앉은키 (cm)  [  92 ]           │
│ 어깨폭 (cm)  [  45 ]           │
│ 팔 길이 (cm) [  60 ]           │
│ 시야각 (°)   [  12 ]           │
│                                │
│ [미리보기]  [저장]             │
└────────────────────────────────┘
```

**프로필 목록**
```
┌────────────────────────────────┐
│ ▸ 승우 기본   (SEDAN-24)       │
│ ▸ 시내 주행   (HATCH)          │
│                                │
│ [새 프로필]                    │
└────────────────────────────────┘
```

---

## 06. 차량 제어

```
┌────────────────────────────────┐
│ 상단: 🔒MFA 통과  🚦안전: OK   │
│ [프로필 적용]  [프리셋: 승우 ▼]│
│ ────────────────────────────── │
│ Seat                           │
│  슬라이드  [-10 ───●─── 10]    │
│  높이      [  0 ──●───   5]    │
│  등받이    [ 90 ────●── 120]   │
│                                │
│ Mirror                         │
│  좌  (↖ ↑ ↗) (← ● →) (↙ ↓ ↘)  │
│  우  (↖ ↑ ↗) (← ● →) (↙ ↓ ↘)  │
│ ────────────────────────────── │
│ 실시간 로그                    │
│ 10:01 seat: completed          │
│ 10:02 mirror: completed        │
└────────────────────────────────┘
```

**안전 차단 상태**: 주행 중·도어잠금 시 상단 경고 + 제어 영역 비활성 + 가이드

---

## 07. 알림/로그

```
┌────────────────────────────────┐
│ [mfa_status] passed 10:00      │
│ [command] seat completed       │
│ [system] session ended         │
└────────────────────────────────┘
```

---

## 08. 설정

```
┌────────────────────────────────┐
│ 계정/보안 (2FA)                │
│ 권한/디바이스                  │
│ 알림 설정                      │
│ 개인정보/약관                  │
│ 버전 정보                      │
│                                │
│ [로그아웃]                     │
└────────────────────────────────┘
```

---

## Empty/Error/로딩 상태

| 상황 | 처리 |
|------|------|
| Empty | 예약 없음 → "대여하기" CTA |
| 오프라인 | 최근 프로필·예약 캐시, 제어 비활성 |
| MFA 전 | 제어 탭에 "현장 인증 필요" 안내 |
| 세션 종료 | 상단 배너 + 홈 리다이렉트 |

---

## Bottom Tab Bar 상세

### 구성
| 탭 | 아이콘 | 조건 |
|----|--------|------|
| 홈 | Home | 미확인 알림 시 도트 |
| 대여 | CalendarClock | 진행중 예약 수 배지 (0은 미표시) |
| 등록 | IdCard | 필수 등록 미완 시 ● |
| 제어 | Car | `picked` + `MFA passed`만 활성, 그 외 🔒 |
| 설정 | Settings | - |

### 동작
- **재클릭**: 리스트 맨 위로 스크롤
- **롱프레스**: 퀵메뉴 (예: "내 예약으로 이동")
- **해프틱**: 탭 전환 시 Light Impulse
- **높이**: iOS 64dp (SafeArea), Android 56dp
- **키보드**: 오픈 시 자동 숨김

### 접근성
- 최소 터치 타깃 44×44pt
- 스크린 리더: "홈 탭", "대여 탭" 등
- 라벨 2줄 방지

### 딥링크
```
mydrive://home
mydrive://rentals
mydrive://register
mydrive://control
mydrive://settings
```

---

## Bottom Action Bar

### 화면별 예시

**예약 상세**
```
[ 현장 인증 시작 ]  [ 예약 취소 ]
상태: approved  TTL 14:59
```

**제어**
```
[ 프로필 적용 ]  [ 프리셋 선택 ▾ ]
상태: MFA 통과 · 안전 OK
```

**등록 진행**
```
[ 다음 단계로 ]
셀카 → NFC → 체형 (진행 표시)
```

### 동작
- 높이: 56~64dp, 반투명 블러 배경
- 스크롤: 자동 축소 (Compact) → 위로 스크롤 시 복귀
- 키보드: 활성화 시 숨김, 종료 후 재표시

---

## 컴포넌트 매핑

| UI | 구현 |
|----|------|
| Seat/Mirror 슬라이더 | RN `Slider` / 커스텀 |
| Mirror 8방향 패드 | 커스텀 `TouchableOpacity` 그리드 |
| 상태/알림 | WebSocket + Zustand/Redux |
| NFC | react-native-nfc-manager |